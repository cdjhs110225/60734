{"entries":[{"timestamp":1742537380158,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[-1,"s"],[0,"://"],[-1,"developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"336\" y=\"-146\"></block><block type=\"pxt-on-start\" x=\"86\" y=\"33\"><statement name=\"HANDLER\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">100000</field></shadow></value><statement name=\"DO\"><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . # # . \n        . . # # # \n        . . # # . \n        . . # . .\n        `</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # # . . \n        # # # . . \n        . # # . . \n        . . # . .\n        `</field></block></next></block></statement></block></statement></block>"],[1,"www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n"],[0,"</xm"]],"start1":12,"start2":12,"length1":743,"length2":113}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"for (let index = 0; index < 100000; index++) {\n    basic.showLeds(`\n        . . # . .\n        . . # # .\n        . . # # #\n        . . # # .\n        . . # . .\n        `)\n    basic.showLeds(`\n        . . # . .\n        . # # . .\n        # # # . .\n        . # # . .\n        . . # . .\n        `)\n}\nbasic.forever(function () {\n\t\n})"],[0,"\n"]],"start1":0,"start2":0,"length1":326,"length2":1}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"   \""],[-1,"preferredEditor\": \"blocksprj\""],[1,"additionalFilePaths\": []"],[0,"\n}\n"]],"start1":229,"start2":229,"length1":36,"length2":31}]}]},{"timestamp":1742537800140,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," \"*\""],[-1,",\n        \"mbit\": \"github:lzty634158/yahboom_mbit_tr#8fd7c261a0f44e05a2241abe743db658decc51f2\""],[0,"\n   "]],"start1":132,"start2":132,"length1":102,"length2":8}]}]},{"timestamp":1742538424994,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"250"],[1,"336"],[0,"\" y=\"-1"],[-1,"79"],[1,"46"],[0,"\"></"]],"start1":106,"start2":106,"length1":20,"length2":20},{"diffs":[[0," x=\""],[-1,"0"],[1,"86"],[0,"\" y=\""],[-1,"0"],[1,"33"],[0,"\"><s"]],"start1":158,"start2":158,"length1":15,"length2":17}]}]},{"timestamp":1742538426726,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"-44"],[1,"250"],[0,"\" y=\"-1"],[-1,"81\"><statement name=\"HANDLER"],[1,"79"],[0,"\"><"],[1,"/"],[0,"block"],[-1," type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Run</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # # # . \n        # . # . # \n        . . # . . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Back</field><next><block type=\"device_pause"],[1,"><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_repeat_ext"],[0,"\"><v"]],"start1":106,"start2":106,"length1":540,"length2":127},{"diffs":[[0,"t\"><value name=\""],[-1,"pause"],[1,"TIMES"],[0,"\"><shadow type=\""]],"start1":228,"start2":228,"length1":37,"length2":37},{"diffs":[[0,"pe=\""],[-1,"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . # . . \n        # . # . # \n        . # # # . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePick"],[1,"math_whole_numb"],[0,"er\">"]],"start1":261,"start2":261,"length1":310,"length2":23},{"diffs":[[0,"field name=\""],[-1,"ms"],[1,"NUM"],[0,"\">1000"],[1,"00"],[0,"</field></sh"]],"start1":285,"start2":285,"length1":32,"length2":35},{"diffs":[[0,"ue><"],[-1,"next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Left</field><next"],[1,"statement name=\"DO\""],[0,"><bl"]],"start1":330,"start2":330,"length1":99,"length2":27},{"diffs":[[0," . \n        . . "],[-1,"."],[1,"#"],[0," # . \n        # "]],"start1":421,"start2":421,"length1":33,"length2":33},{"diffs":[[0," # # . \n        "],[-1,"# #"],[1,". ."],[0," # # # \n        "]],"start1":436,"start2":436,"length1":35,"length2":35},{"diffs":[[0,"    . . "],[-1,"."],[1,"#"],[0," # . \n  "]],"start1":467,"start2":467,"length1":17,"length2":17},{"diffs":[[0,"ock "],[-1,"type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Right</field><next><block "],[0,"type"]],"start1":526,"start2":526,"length1":221,"length2":8},{"diffs":[[0," . \n        . # "],[-1,"."],[1,"#"],[0," . . \n        # "]],"start1":590,"start2":590,"length1":33,"length2":33},{"diffs":[[0,"  # # # "],[-1,"# #"],[1,". ."],[0," \n      "]],"start1":619,"start2":619,"length1":19,"length2":19},{"diffs":[[0,"    . # "],[-1,"."],[1,"#"],[0," . . \n  "]],"start1":636,"start2":636,"length1":17,"length2":17},{"diffs":[[0,"ld><"],[-1,"next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></nex"],[1,"/block></next></block></statemen"],[0,"t></"]],"start1":683,"start2":683,"length1":310,"length2":40}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"basic.forever(function () {\n    mbit_小車類.CarCtrl(mbit_小車類.CarState.Car_Run)\n    basic.showLeds(`\n        . . # . .\n        . # # # .\n        # . # . #\n        . . # . .\n        . . # . .\n        `)\n    basic.pause(1000)\n    mbit_小車類.CarCtrl(mbit_小車類.CarState.Car_Back)\n    basic.pause(1000)\n    basic.showLeds(`\n        . . # . .\n        . . # . .\n        # . # . #\n        . # # # .\n        . . # . .\n        `)\n    basic.pause(1000)\n    mbit_小車類.CarCtrl(mbit_小車類.CarState.Car_Left)"],[1,"for (let index = 0; index < 100000; index++) {"],[0,"\n   "]],"start1":0,"start2":0,"length1":487,"length2":50},{"diffs":[[0,". .\n        . . "],[-1,"."],[1,"#"],[0," # .\n        # #"]],"start1":82,"start2":82,"length1":33,"length2":33},{"diffs":[[0,". # # .\n        "],[-1,"# #"],[1,". ."],[0," # # #\n        ."]],"start1":96,"start2":96,"length1":35,"length2":35},{"diffs":[[0,"    . . "],[-1,"."],[1,"#"],[0," # .\n   "]],"start1":126,"start2":126,"length1":17,"length2":17},{"diffs":[[0," `)\n"],[-1,"    basic.pause(1000)\n    mbit_小車類.CarCtrl(mbit_小車類.CarState.Car_Right)\n"],[0,"    "]],"start1":165,"start2":165,"length1":80,"length2":8},{"diffs":[[0,". .\n        . # "],[-1,"."],[1,"#"],[0," . .\n        # #"]],"start1":204,"start2":204,"length1":33,"length2":33},{"diffs":[[0,"  # # # "],[-1,"# #"],[1,". ."],[0,"\n       "]],"start1":232,"start2":232,"length1":19,"length2":19},{"diffs":[[0,"    . # "],[-1,"."],[1,"#"],[0," . .\n   "]],"start1":248,"start2":248,"length1":17,"length2":17},{"diffs":[[0," `)\n"],[-1,"    "],[1,"}\n"],[0,"basic."],[-1,"pause(1000)"],[1,"forever(function () {\n\t"],[0,"\n})\n"]],"start1":287,"start2":287,"length1":29,"length2":39}]}]},{"timestamp":1742538679020,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ver\""],[-1," id=\"!(GSc+jCSNIkYnG^kgs?\""],[0," x=\""]],"start1":102,"start2":102,"length1":34,"length2":8},{"diffs":[[0,"trl\""],[-1," id=\"_O:f(7*)k3Q]0,-Ar43M\""],[0,"><fi"]],"start1":172,"start2":172,"length1":34,"length2":8},{"diffs":[[0,"eds\""],[-1," id=\"WUjt@;Gwy+~)?6+:lsB.\""],[0,"><fi"]],"start1":262,"start2":262,"length1":34,"length2":8},{"diffs":[[0,"use\""],[-1," id=\"mVb%Cht2VOi!y+#_i)/3\""],[0,"><va"]],"start1":427,"start2":427,"length1":34,"length2":8},{"diffs":[[0,"ker\""],[-1," id=\"rj0,4D|SwGUSUR1#Bmjq\""],[0,"><fi"]],"start1":473,"start2":473,"length1":34,"length2":8},{"diffs":[[0,"trl\""],[-1," id=\"vGjoVF)Y0n2YAoN?eQ[s\""],[0,"><fi"]],"start1":552,"start2":552,"length1":34,"length2":8},{"diffs":[[0,"use\""],[-1," id=\"m8c,%zdd|]wPmDAV^(RP\""],[0,"><va"]],"start1":639,"start2":639,"length1":34,"length2":8},{"diffs":[[0,"ker\""],[-1," id=\"5iArScPke.$ECc_U=C}!\""],[0,"><fi"]],"start1":685,"start2":685,"length1":34,"length2":8},{"diffs":[[0,"eds\""],[-1," id=\"tA^1?)hPz*~7B$.h4Pg#\""],[0,"><fi"]],"start1":768,"start2":768,"length1":34,"length2":8},{"diffs":[[0,"use\""],[-1," id=\"m:#DU~/sA~^Zo]i[a6*l\""],[0,"><va"]],"start1":933,"start2":933,"length1":34,"length2":8},{"diffs":[[0,"ker\""],[-1," id=\";;o*HR$QosUiF_hM^(6=\""],[0,"><fi"]],"start1":979,"start2":979,"length1":34,"length2":8},{"diffs":[[0,"trl\""],[-1," id=\"1([eC3PL!!Ok!V49-:sw\""],[0,"><fi"]],"start1":1058,"start2":1058,"length1":34,"length2":8},{"diffs":[[0,"eds\""],[-1," id=\"5;rlhX2mfa|19R:%dp,;\""],[0,"><fi"]],"start1":1149,"start2":1149,"length1":34,"length2":8},{"diffs":[[0,"use\""],[-1," id=\"H|{~|T_8qw*]T5EMd1$h\""],[0,"><va"]],"start1":1314,"start2":1314,"length1":34,"length2":8},{"diffs":[[0,"ker\""],[-1," id=\"fVm9q]eN^?^09T_-]C}^\""],[0,"><fi"]],"start1":1360,"start2":1360,"length1":34,"length2":8},{"diffs":[[0,"trl\""],[-1," id=\"3USCb.:33HwU[w$YE,/Z\""],[0,"><fi"]],"start1":1439,"start2":1439,"length1":34,"length2":8},{"diffs":[[0,"eds\""],[-1," id=\"TH)m,*xSKrD|fIXWZ3S1\""],[0,"><fi"]],"start1":1531,"start2":1531,"length1":34,"length2":8},{"diffs":[[0,"use\""],[-1," id=\"6U49(V#|,%za[U7asj$i\""],[0,"><va"]],"start1":1696,"start2":1696,"length1":34,"length2":8},{"diffs":[[0,"ker\""],[-1," id=\"[V|n^_2^w`-Np}jJDIr+\""],[0,"><fi"]],"start1":1742,"start2":1742,"length1":34,"length2":8}]}]},{"timestamp":1744352514919,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"er\" "],[-1,"x=\"0"],[1,"id=\"!(GSc+jCSNIkYnG^kgs?\" x=\"-44"],[0,"\" y=\""],[-1,"0"],[1,"-181"],[0,"\"><s"]],"start1":103,"start2":103,"length1":18,"length2":49},{"diffs":[[0,"e=\"mbit_CarCtrl\""],[1," id=\"_O:f(7*)k3Q]0,-Ar43M\""],[0,"><field name=\"in"]],"start1":186,"start2":186,"length1":32,"length2":58},{"diffs":[[0,"evice_show_leds\""],[1," id=\"WUjt@;Gwy+~)?6+:lsB.\""],[0,"><field name=\"LE"]],"start1":302,"start2":302,"length1":32,"length2":58},{"diffs":[[0,"e=\"device_pause\""],[1," id=\"mVb%Cht2VOi!y+#_i)/3\""],[0,"><value name=\"pa"]],"start1":493,"start2":493,"length1":32,"length2":58},{"diffs":[[0,"ype=\"timePicker\""],[1," id=\"rj0,4D|SwGUSUR1#Bmjq\""],[0,"><field name=\"ms"]],"start1":565,"start2":565,"length1":32,"length2":58},{"diffs":[[0,"e=\"mbit_CarCtrl\""],[1," id=\"vGjoVF)Y0n2YAoN?eQ[s\""],[0,"><field name=\"in"]],"start1":670,"start2":670,"length1":32,"length2":58},{"diffs":[[0,"e=\"device_pause\""],[1," id=\"m8c,%zdd|]wPmDAV^(RP\""],[0,"><value name=\"pa"]],"start1":783,"start2":783,"length1":32,"length2":58},{"diffs":[[0,"ype=\"timePicker\""],[1," id=\"5iArScPke.$ECc_U=C}!\""],[0,"><field name=\"ms"]],"start1":855,"start2":855,"length1":32,"length2":58},{"diffs":[[0,"evice_show_leds\""],[1," id=\"tA^1?)hPz*~7B$.h4Pg#\""],[0,"><field name=\"LE"]],"start1":964,"start2":964,"length1":32,"length2":58},{"diffs":[[0,"e=\"device_pause\""],[1," id=\"m:#DU~/sA~^Zo]i[a6*l\""],[0,"><value name=\"pa"]],"start1":1155,"start2":1155,"length1":32,"length2":58},{"diffs":[[0,"ype=\"timePicker\""],[1," id=\";;o*HR$QosUiF_hM^(6=\""],[0,"><field name=\"ms"]],"start1":1227,"start2":1227,"length1":32,"length2":58},{"diffs":[[0,"e=\"mbit_CarCtrl\""],[1," id=\"1([eC3PL!!Ok!V49-:sw\""],[0,"><field name=\"in"]],"start1":1332,"start2":1332,"length1":32,"length2":58},{"diffs":[[0,"evice_show_leds\""],[1," id=\"5;rlhX2mfa|19R:%dp,;\""],[0,"><field name=\"LE"]],"start1":1449,"start2":1449,"length1":32,"length2":58},{"diffs":[[0,"e=\"device_pause\""],[1," id=\"H|{~|T_8qw*]T5EMd1$h\""],[0,"><value name=\"pa"]],"start1":1640,"start2":1640,"length1":32,"length2":58},{"diffs":[[0,"ype=\"timePicker\""],[1," id=\"fVm9q]eN^?^09T_-]C}^\""],[0,"><field name=\"ms"]],"start1":1712,"start2":1712,"length1":32,"length2":58},{"diffs":[[0,"CarCtrl\""],[1," id=\"3USCb.:33HwU[w$YE,/Z\""],[0,"><field "]],"start1":1825,"start2":1825,"length1":16,"length2":42},{"diffs":[[0,"ow_leds\""],[1," id=\"TH)m,*xSKrD|fIXWZ3S1\""],[0,"><field "]],"start1":1943,"start2":1943,"length1":16,"length2":42},{"diffs":[[0,"e_pause\""],[1," id=\"6U49(V#|,%za[U7asj$i\""],[0,"><value "]],"start1":2134,"start2":2134,"length1":16,"length2":42},{"diffs":[[0,"ePicker\""],[1," id=\"[V|n^_2^w`-Np}jJDIr+\""],[0,"><field "]],"start1":2206,"start2":2206,"length1":16,"length2":42}]}]},{"timestamp":1744352515523,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":338,"start2":338,"length1":17,"length2":21}]}]},{"timestamp":1745561971833,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[1,"basic.forever(function () {\n    mbit_小車類.CarCtrl(mbit_小車類.CarState.Car_Run)\n    basic.showLeds(`\n        . . # . .\n        . # # # .\n        # . # . #\n        . . # . .\n        . . # . .\n        `)\n    basic.pause(1000)\n    mbit_小車類.CarCtrl(mbit_小車類.CarState.Car_Back)\n    basic.pause(1000)\n    basic.showLeds(`\n        . . # . .\n        . . # . .\n        # . # . #\n        . # # # .\n        . . # . .\n        `)\n    basic.pause(1000)\n    mbit_小車類.CarCtrl(mbit_小車類.CarState.Car_Left)\n    basic.showLeds(`\n        . . # . .\n        . . . # .\n        # # # # #\n        . . . # .\n        . . # . .\n        `)\n    basic.pause(1000)\n    mbit_小車類.CarCtrl(mbit_小車類.CarState.Car_Right)\n    basic.showLeds(`\n        . . # . .\n        . # . . .\n        # # # # #\n        . # . . .\n        . . # . .\n        `)\n    basic.pause(1000)\n})\n"]],"start1":0,"start2":0,"length1":0,"length2":825}]}]},{"timestamp":1745562777557,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"basic.forever(function () {\n    let left = pins.analogReadPin(AnalogPin.P13)\n    let right = pins.analogReadPin(AnalogPin.P14)\n    let threshold = 600\n\n    if (left > threshold && right > threshold) {\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M1, 100)\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M2, 100)\n    } else if (left > threshold) {\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M1, 0)\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M2, 100)\n    } else if (right > threshold) {\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M1, 100)\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M2, 0)\n    } else {\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M1, 0)\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M2, 0)\n    }\n})"]],"start1":0,"start2":0,"length1":725,"length2":0}]}]},{"timestamp":1745562781177,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"// 黑線追蹤機器人控制器\nclass LineFollowerRobot {\n    constructor"],[1,"basic.forever(function "],[0,"() {"]],"start1":0,"start2":0,"length1":59,"length2":27},{"diffs":[[0,"    "],[-1,"    // 機器人硬體設定\n        this.leftMotor = { speed: 0 };\n        this.rightMotor = { speed: 0 };\n\n        // 感測器設定 (假設有兩個感測器)\n        this.sensors = [\n            { pin: 'A0', value: 0 }, // 左感測器\n            { pin: 'A1', value: 0 }  // 右感測器\n        ];\n\n        // PID 控制參數\n        this.Kp = 0.5;  // 比例常數\n        this.Ki = 0.01; // 積分常數\n        this.Kd = 0.1;  // 微分常數\n\n        this.lastError = 0;\n        this.integral = 0;\n\n        // 基本速度設定\n        this.baseSpeed = 150; // 0-255 範圍\n    }\n\n    // 讀取感測器數值 (模擬函數)\n    readSensors() {\n        // 實際應用中這裡會從硬體讀取數值\n        // 這裡模擬感測器讀數 (0 = 黑線, 1 = 白地)\n        this.sensors[0].value = Math.random() > 0.7 ? 0 : 1; // 左感測器\n        this.sensors[1].value = Math.random() > 0.7 ? 0 : 1; // 右感測器\n\n        // 返回感測器狀態\n        return {\n            "],[1,"let left = pins.analogReadPin(AnalogPin.P13)\n    let right = pins.analogReadPin(AnalogPin.P14)\n    let threshold = 600\n\n    if ("],[0,"left"],[-1,": this.sensors[0].value,\n            right: this.sensors[1].value\n        };\n    }\n\n    // 計算誤差 (用於PID控制)\n    calculateError(sensorValues) {\n        // 簡單的誤差計算:\n        // 如果左感測器在黑線上，向右轉\n        // 如果右感測器在黑線上，向左轉\n        // 兩者都在或都不在，保持直行\n\n        if (sensorValues.left === 0 && sensorValues.right === 1) {\n            return -1; // 需要向右轉\n        } else if (sensorValues.left === 1 && sensorValues.right === 0) {\n            return 1;  // 需要向左轉\n        } else {\n            return 0;   // 直行\n        }\n    }\n\n    // PID 控制計算\n    computePID(error) {\n        this.integral += error;\n        const derivative = error - this.lastError;\n        this.lastError = error;\n\n        return this.Kp * error + this.Ki * this.integral + this.Kd * derivative;\n    }\n\n    // 設定馬達速度\n    setMotorSpeeds(leftSpeed, rightSpeed) {\n        // 限制速度在 0-255 範圍內\n        this.leftMotor.speed = Math.max(0, Math.min(255, leftSpeed));\n        this.rightMotor.speed = Math.max(0, Math.min(255, rightSpeed));\n\n        console.log(`設定馬達速度: 左=${this.leftMotor.speed}, 右=${this.rightMotor.speed}`);\n    }\n\n    // 主控制循環\n    followLine() {\n        // 讀取感測器數值\n        const sensorValues = this.readSensors();\n        console.log(`感測器讀數: 左=${sensorValues.left}, 右=${sensorValues.right}`);\n\n        // 計算誤差\n        const error = this.calculateError(sensorValues);\n\n        // 計算PID調整值\n        const pidAdjustment = this.computePID(error);\n\n        // 應用PID調整到馬達速度\n        const leftSpeed = this.baseSpeed - pidAdjustment;\n        const rightSpeed = this.baseSpeed + pidAdjustment;\n\n        // 設定馬達速度\n        this.setMotorSpeeds(leftSpeed, rightSpeed);\n    }\n\n    // 開始追蹤\n    start() {\n        console.log('開始黑線追蹤...');\n        // 設置定時器模擬循環\n        this.intervalId = setInterval(() => this.followLine(), 10"],[1," > threshold && right > threshold) {\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M1, 100)\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M2, 100)\n    } else if (left > threshold) {\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M1, 0)\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M2, 100)\n    } else if (right > threshold) {\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M1, 100)\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M2, "],[0,"0)"],[-1,";"],[0,"\n    }"],[-1,"\n\n    // 停止追蹤\n    stop() {\n        clearInterval(this.intervalId);\n        this.setMotorSpeeds(0"],[1," else {\n        Mbit_Motor.motorRun(Mbit_Motor.Motors.M1"],[0,", 0)"],[-1,";"],[0,"\n   "]],"start1":28,"start2":28,"length1":2673,"length2":639},{"diffs":[[0,"    "],[-1,"console.log('已停止黑線追蹤');\n    }\n}\n\n// 使用範例\nconst robot = new LineFollowerRobot();\nrobot.start();\n\n// 10秒後停止 (模擬用)\nsetTimeout(() => robot.stop(), 10000);\n"],[1,"Mbit_Motor.motorRun(Mbit_Motor.Motors.M2, 0)\n    }\n})"]],"start1":668,"start2":668,"length1":155,"length2":57}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"1f2\""],[-1,",\n        \"pxt-katakana\": \"github:mbitfun/pxt-katakana#v1.0.16\""],[0,"\n   "]],"start1":226,"start2":226,"length1":71,"length2":8}]}]},{"timestamp":1745563329560,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[1,"// 黑線追蹤機器人控制器\nclass LineFollowerRobot {\n    constructor() {\n        // 機器人硬體設定\n        this.leftMotor = { speed: 0 };\n        this.rightMotor = { speed: 0 };\n\n        // 感測器設定 (假設有兩個感測器)\n        this.sensors = [\n            { pin: 'A0', value: 0 }, // 左感測器\n            { pin: 'A1', value: 0 }  // 右感測器\n        ];\n\n        // PID 控制參數\n        this.Kp = 0.5;  // 比例常數\n        this.Ki = 0.01; // 積分常數\n        this.Kd = 0.1;  // 微分常數\n\n        this.lastError = 0;\n        this.integral = 0;\n\n        // 基本速度設定\n        this.baseSpeed = 150; // 0-255 範圍\n    }\n\n    // 讀取感測器數值 (模擬函數)\n    readSensors() {\n        // 實際應用中這裡會從硬體讀取數值\n        // 這裡模擬感測器讀數 (0 = 黑線, 1 = 白地)\n        this.sensors[0].value = Math.random() > 0.7 ? 0 : 1; // 左感測器\n        this.sensors[1].value = Math.random() > 0.7 ? 0 : 1; // 右感測器\n\n        // 返回感測器狀態\n        return {\n            left: this.sensors[0].value,\n            right: this.sensors[1].value\n        };\n    }\n\n    // 計算誤差 (用於PID控制)\n    calculateError(sensorValues) {\n        // 簡單的誤差計算:\n        // 如果左感測器在黑線上，向右轉\n        // 如果右感測器在黑線上，向左轉\n        // 兩者都在或都不在，保持直行\n\n        if (sensorValues.left === 0 && sensorValues.right === 1) {\n            return -1; // 需要向右轉\n        } else if (sensorValues.left === 1 && sensorValues.right === 0) {\n            return 1;  // 需要向左轉\n        } else {\n            return 0;   // 直行\n        }\n    }\n\n    // PID 控制計算\n    computePID(error) {\n        this.integral += error;\n        const derivative = error - this.lastError;\n        this.lastError = error;\n\n        return this.Kp * error + this.Ki * this.integral + this.Kd * derivative;\n    }\n\n    // 設定馬達速度\n    setMotorSpeeds(leftSpeed, rightSpeed) {\n        // 限制速度在 0-255 範圍內\n        this.leftMotor.speed = Math.max(0, Math.min(255, leftSpeed));\n        this.rightMotor.speed = Math.max(0, Math.min(255, rightSpeed));\n\n        console.log(`設定馬達速度: 左=${this.leftMotor.speed}, 右=${this.rightMotor.speed}`);\n    }\n\n    // 主控制循環\n    followLine() {\n        // 讀取感測器數值\n        const sensorValues = this.readSensors();\n        console.log(`感測器讀數: 左=${sensorValues.left}, 右=${sensorValues.right}`);\n\n        // 計算誤差\n        const error = this.calculateError(sensorValues);\n\n        // 計算PID調整值\n        const pidAdjustment = this.computePID(error);\n\n        // 應用PID調整到馬達速度\n        const leftSpeed = this.baseSpeed - pidAdjustment;\n        const rightSpeed = this.baseSpeed + pidAdjustment;\n\n        // 設定馬達速度\n        this.setMotorSpeeds(leftSpeed, rightSpeed);\n    }\n\n    // 開始追蹤\n    start() {\n        console.log('開始黑線追蹤...');\n        // 設置定時器模擬循環\n        this.intervalId = setInterval(() => this.followLine(), 100);\n    }\n\n    // 停止追蹤\n    stop() {\n        clearInterval(this.intervalId);\n        this.setMotorSpeeds(0, 0);\n        console.log('已停止黑線追蹤');\n    }\n}\n\n// 使用範例\nconst robot = new LineFollowerRobot();\nrobot.start();\n\n// 10秒後停止 (模擬用)\nsetTimeout(() => robot.stop(), 10000);"],[0,"\n"]],"start1":0,"start2":0,"length1":1,"length2":2889}]}]},{"timestamp":1745886702509,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"pe=\""],[-1,"pxt-on-start\" x=\"10\" y=\"10\""],[1,"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Run</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # # # . \n        # . # . # \n        . . # . . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Back</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . # . . \n        # . # . # \n        . # # # . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Left</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . . # . \n        # # # # # \n        . . . # . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Right</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # . . . \n        # # # # # \n        . # . . . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement"],[0,"></b"]],"start1":87,"start2":87,"length1":35,"length2":1904}]}]},{"timestamp":1745886704814,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"58\" y=\"114\"><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"mbit_Line_Sensor\"><field name=\"direct\">mbit_小車類.enPos.LeftState</field><field name=\"value\">mbit_小車類.enLineState.White</field></block></value><value name=\"B\"><block type=\"mbit_Line_Sensor\"><field name=\"direct\">mbit_小車類.enPos.RightState</field><field name=\"value\">mbit_小車類.enLineState.White</field></block></value></block></value><statement name=\"DO0\"><block type=\"mbit_CarCtrlSpeed\"><field name=\"index\">mbit_小車類.CarState.Car_Run</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"mbit_Line_Sensor\"><field name=\"direct\">mbit_小車類.enPos.LeftState</field><field name=\"value\">mbit_小車類.enLineState.White</field></block></value><value name=\"B\"><block type=\"mbit_Line_Sensor\"><field name=\"direct\">mbit_小車類.enPos.RightState</field><field name=\"value\">mbit_小車類.enLineState.White</field></block></value></block></value><statement name=\"DO1\"><block type=\"mbit_CarCtrlSpeed\"><field name=\"index\">mbit_小車類.CarState.Car_Run</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"mbit_Line_Sensor\"><field name=\"direct\">mbit_小車類.enPos.LeftState</field><field name=\"value\">mbit_小車類.enLineState.White</field></block></value><value name=\"B\"><block type=\"mbit_Line_Sensor\"><field name=\"direct\">mbit_小車類.enPos.RightState</field><field name=\"value\">mbit_小車類.enLineState.White</field></block></value></block></value><statement name=\"DO2\"><block type=\"mbit_CarCtrlSpeed\"><field name=\"index\">mbit_小車類.CarState.Car_Run</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Stop</field></block></statement></block></statement"],[1,"10\" y=\"10\""],[0,"></b"]],"start1":104,"start2":104,"length1":2653,"length2":18}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"if (mbit_小車類.Line_Sensor(mbit_小車類.enPos.LeftState, mbit_小車類.enLineState.White) && mbit_小車類.Line_Sensor(mbit_小車類.enPos.RightState, mbit_小車類.enLineState.White)) {\n    mbit_小車類.CarCtrlSpeed(mbit_小車類.CarState.Car_Run, 100)\n} else if (mbit_小車類.Line_Sensor(mbit_小車類.enPos.LeftState, mbit_小車類.enLineState.White) && mbit_小車類.Line_Sensor(mbit_小車類.enPos.RightState, mbit_小車類.enLineState.White)) {\n    mbit_小車類.CarCtrlSpeed(mbit_小車類.CarState.Car_Run, 50)\n} else if (mbit_小車類.Line_Sensor(mbit_小車類.enPos.LeftState, mbit_小車類.enLineState.White) && mbit_小車類.Line_Sensor(mbit_小車類.enPos.RightState, mbit_小車類.enLineState.White)) {\n    mbit_小車類.CarCtrlSpeed(mbit_小車類.CarState.Car_Run, 50)\n} else {\n    mbit_小車類.CarCtrl(mbit_小車類.CarState.Car_Stop)\n}"],[0,"\n"]],"start1":0,"start2":0,"length1":729,"length2":1}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":401,"start2":401,"length1":21,"length2":17}]}]},{"timestamp":1745886868731,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"art\""],[-1," id=\"4*_sMn*?i-GhP9!~NKrr\""],[0," x=\""],[-1,"0"],[1,"58"],[0,"\" y=\""],[-1,"0"],[1,"114"],[0,"\"><s"]],"start1":100,"start2":100,"length1":45,"length2":22},{"diffs":[[0,"_if\""],[-1," id=\"}1d@S`jCRt-zarBPJ|*E\""],[0,"><mu"]],"start1":167,"start2":167,"length1":34,"length2":8},{"diffs":[[0,"ean\""],[-1," id=\"Y$gOT6z%{j)7K66tjFL5\""],[0,"><fi"]],"start1":255,"start2":255,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"E{L68,7(*RnRjGVW802T\""],[0,"><fi"]],"start1":325,"start2":325,"length1":34,"length2":8},{"diffs":[[0,"sor\""],[-1," id=\"Y+(f(fv*%CDD2SVnO5Do\""],[0,"><fi"]],"start1":400,"start2":400,"length1":34,"length2":8},{"diffs":[[0,"sor\""],[-1," id=\"VXS;3AbUud-zVl$najid\""],[0,"><fi"]],"start1":570,"start2":570,"length1":34,"length2":8},{"diffs":[[0,"eed\""],[-1," id=\"3~Gfc|^=GK*CN2B?S+)]\""],[0,"><fi"]],"start1":764,"start2":764,"length1":34,"length2":8},{"diffs":[[0,"max\""],[-1," id=\"mc-RpJJhs|[Zg_fm:XB=\""],[0,"><mu"]],"start1":871,"start2":871,"length1":34,"length2":8},{"diffs":[[0,"ean\""],[-1," id=\"2^.FlW@9WiBI3N7KU`XX\""],[0,"><fi"]],"start1":1054,"start2":1054,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"oZG,EWovm6X_PCmKwU^V\""],[0,"><fi"]],"start1":1125,"start2":1125,"length1":34,"length2":8},{"diffs":[[0,"sor\""],[-1," id=\"sRHkFv[f`^D^RI39?UB2\""],[0,"><fi"]],"start1":1200,"start2":1200,"length1":34,"length2":8},{"diffs":[[0,"sor\""],[-1," id=\"meI0h):6#{mrQOhq~Tw}\""],[0,"><fi"]],"start1":1370,"start2":1370,"length1":34,"length2":8},{"diffs":[[0,"eed\""],[-1," id=\"+ro~yk[nNDvd!q,i3s!D\""],[0,"><fi"]],"start1":1564,"start2":1564,"length1":34,"length2":8},{"diffs":[[0,"max\""],[-1," id=\")A[0,dqVIX1WWWUYuSXR\""],[0,"><mu"]],"start1":1671,"start2":1671,"length1":34,"length2":8},{"diffs":[[0,"ean\""],[-1," id=\"b`Q(GMufXH+%JU_wUlP.\""],[0,"><fi"]],"start1":1853,"start2":1853,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"NqF7]pV$w6lZuX?A`Kg~\""],[0,"><fi"]],"start1":1924,"start2":1924,"length1":34,"length2":8},{"diffs":[[0,"sor\""],[-1," id=\"`$V`tFR1W2ATKH;3h+t@\""],[0,"><fi"]],"start1":1999,"start2":1999,"length1":34,"length2":8},{"diffs":[[0,"sor\""],[-1," id=\"-W/z{j(Rq.-;ZHq)hECK\""],[0,"><fi"]],"start1":2169,"start2":2169,"length1":34,"length2":8},{"diffs":[[0,"eed\""],[-1," id=\"LTyfi*J@3:u!bA|h2`3x\""],[0,"><fi"]],"start1":2363,"start2":2363,"length1":34,"length2":8},{"diffs":[[0,"max\""],[-1," id=\"ckc6XsN!E2y$;PpNzMMU\""],[0,"><mu"]],"start1":2470,"start2":2470,"length1":34,"length2":8},{"diffs":[[0,"trl\""],[-1," id=\"s/mVS$^y]4s~E8qi(~gb\""],[0,"><fi"]],"start1":2655,"start2":2655,"length1":34,"length2":8}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":381,"start2":381,"length1":52,"length2":8}]},{"type":"added","filename":"test.ts","value":"// 在這裡測試；當此封包作為擴充功能時，將不會編譯此內容。\n"}]}],"snapshots":[{"timestamp":1742537380157,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"60734\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1744352514919,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"-44\" y=\"-181\"><statement name=\"HANDLER\"><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Run</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # # # . \n        # . # . # \n        . . # . . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Back</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . # . . \n        # . # . # \n        . # # # . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Left</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . . # . \n        # # # # # \n        . . . # . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Right</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # . . . \n        # # # # # \n        . # . . . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"","README.md":"","pxt.json":"{\n    \"name\": \"60734\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"mbit\": \"github:lzty634158/yahboom_mbit_tr#8fd7c261a0f44e05a2241abe743db658decc51f2\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1745561971833,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Run</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # # # . \n        # . # . # \n        . . # . . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Back</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . # . . \n        # . # . # \n        . # # # . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Left</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . . # . \n        # # # # # \n        . . . # . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Right</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # . . . \n        # # # # # \n        . # . . . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"","README.md":"","pxt.json":"{\n    \"name\": \"60734\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"mbit\": \"github:lzty634158/yahboom_mbit_tr#8fd7c261a0f44e05a2241abe743db658decc51f2\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1745886702509,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Run</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # # # . \n        # . # . # \n        . . # . . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Back</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . # . . \n        # . # . # \n        . # # # . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Left</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . . # . \n        # # # # # \n        . . . # . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"mbit_CarCtrl\"><field name=\"index\">mbit_小車類.CarState.Car_Right</field><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # . . . \n        # # # # # \n        . # . . . \n        . . # . .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"// 黑線追蹤機器人控制器\nclass LineFollowerRobot {\n    constructor() {\n        // 機器人硬體設定\n        this.leftMotor = { speed: 0 };\n        this.rightMotor = { speed: 0 };\n\n        // 感測器設定 (假設有兩個感測器)\n        this.sensors = [\n            { pin: 'A0', value: 0 }, // 左感測器\n            { pin: 'A1', value: 0 }  // 右感測器\n        ];\n\n        // PID 控制參數\n        this.Kp = 0.5;  // 比例常數\n        this.Ki = 0.01; // 積分常數\n        this.Kd = 0.1;  // 微分常數\n\n        this.lastError = 0;\n        this.integral = 0;\n\n        // 基本速度設定\n        this.baseSpeed = 150; // 0-255 範圍\n    }\n\n    // 讀取感測器數值 (模擬函數)\n    readSensors() {\n        // 實際應用中這裡會從硬體讀取數值\n        // 這裡模擬感測器讀數 (0 = 黑線, 1 = 白地)\n        this.sensors[0].value = Math.random() > 0.7 ? 0 : 1; // 左感測器\n        this.sensors[1].value = Math.random() > 0.7 ? 0 : 1; // 右感測器\n\n        // 返回感測器狀態\n        return {\n            left: this.sensors[0].value,\n            right: this.sensors[1].value\n        };\n    }\n\n    // 計算誤差 (用於PID控制)\n    calculateError(sensorValues) {\n        // 簡單的誤差計算:\n        // 如果左感測器在黑線上，向右轉\n        // 如果右感測器在黑線上，向左轉\n        // 兩者都在或都不在，保持直行\n\n        if (sensorValues.left === 0 && sensorValues.right === 1) {\n            return -1; // 需要向右轉\n        } else if (sensorValues.left === 1 && sensorValues.right === 0) {\n            return 1;  // 需要向左轉\n        } else {\n            return 0;   // 直行\n        }\n    }\n\n    // PID 控制計算\n    computePID(error) {\n        this.integral += error;\n        const derivative = error - this.lastError;\n        this.lastError = error;\n\n        return this.Kp * error + this.Ki * this.integral + this.Kd * derivative;\n    }\n\n    // 設定馬達速度\n    setMotorSpeeds(leftSpeed, rightSpeed) {\n        // 限制速度在 0-255 範圍內\n        this.leftMotor.speed = Math.max(0, Math.min(255, leftSpeed));\n        this.rightMotor.speed = Math.max(0, Math.min(255, rightSpeed));\n\n        console.log(`設定馬達速度: 左=${this.leftMotor.speed}, 右=${this.rightMotor.speed}`);\n    }\n\n    // 主控制循環\n    followLine() {\n        // 讀取感測器數值\n        const sensorValues = this.readSensors();\n        console.log(`感測器讀數: 左=${sensorValues.left}, 右=${sensorValues.right}`);\n\n        // 計算誤差\n        const error = this.calculateError(sensorValues);\n\n        // 計算PID調整值\n        const pidAdjustment = this.computePID(error);\n\n        // 應用PID調整到馬達速度\n        const leftSpeed = this.baseSpeed - pidAdjustment;\n        const rightSpeed = this.baseSpeed + pidAdjustment;\n\n        // 設定馬達速度\n        this.setMotorSpeeds(leftSpeed, rightSpeed);\n    }\n\n    // 開始追蹤\n    start() {\n        console.log('開始黑線追蹤...');\n        // 設置定時器模擬循環\n        this.intervalId = setInterval(() => this.followLine(), 100);\n    }\n\n    // 停止追蹤\n    stop() {\n        clearInterval(this.intervalId);\n        this.setMotorSpeeds(0, 0);\n        console.log('已停止黑線追蹤');\n    }\n}\n\n// 使用範例\nconst robot = new LineFollowerRobot();\nrobot.start();\n\n// 10秒後停止 (模擬用)\nsetTimeout(() => robot.stop(), 10000);\n","README.md":"","pxt.json":"{\n    \"name\": \"60734\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"mbit\": \"github:lzty634158/yahboom_mbit_tr#8fd7c261a0f44e05a2241abe743db658decc51f2\",\n        \"pxt-katakana\": \"github:mbitfun/pxt-katakana#v1.0.16\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1745887354303}